---
keywords: fastai
description: Creating a game
title: Snake Game
toc: true
branch: master
badges: true
comments: true
author: Naja Fonseca
categories: [markdown, javascript]
permalink: /snake-game
nb_path: _notebooks/2022-10-19-Snake-Game-3.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2022-10-19-Snake-Game-3.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>&lt;!DOCTYPE html&gt;</p>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>snake game</title>
   <style>
       body{
           margin: 0px;
           padding: 0px;
           display: flex;
            flex-direction: column; /* arrage items on top of the other */
            justify-content: center;
            align-items: center;
       }
       canvas{
           box-shadow: black 20px 10px 50px; /*elevate our canvas*/

       }
   </style>
</head>
<body>
    <canvas id="game" width="400" height="400"/>
    <script src="index.js"></script>
</body>
</html>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-javascript"><pre><span></span><span class="kr">const</span> <span class="nx">canvas</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;game&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">ctx</span><span class="o">=</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
<span class="c1">//increase snake size </span>
<span class="kr">class</span> <span class="nx">snakePart</span><span class="p">{</span>
<span class="nx">constructor</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="o">=</span><span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="o">=</span><span class="nx">y</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">}</span>

<span class="kd">let</span> <span class="nx">speed</span><span class="o">=</span><span class="mf">7</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">tileCount</span><span class="o">=</span><span class="mf">20</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">tileSize</span><span class="o">=</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">/</span><span class="nx">tileCount</span><span class="o">-</span><span class="mf">2</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">headX</span><span class="o">=</span><span class="mf">10</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">headY</span><span class="o">=</span><span class="mf">10</span><span class="p">;</span>

<span class="c1">// array for snake parts</span>
<span class="kr">const</span> <span class="nx">snakeParts</span><span class="o">=</span><span class="p">[];</span>
<span class="kd">let</span> <span class="nx">tailLength</span><span class="o">=</span><span class="mf">2</span><span class="p">;</span>

<span class="c1">//initialize the speed of snake</span>
<span class="kd">let</span> <span class="nx">xvelocity</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">yvelocity</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span>

<span class="c1">//draw apple</span>
<span class="kd">let</span> <span class="nx">appleX</span><span class="o">=</span><span class="mf">5</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">appleY</span><span class="o">=</span><span class="mf">5</span><span class="p">;</span>

<span class="c1">//scores</span>
<span class="kd">let</span> <span class="nx">score</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span>

<span class="c1">// create game loop-to continously update screen</span>
<span class="kd">function</span> <span class="nx">drawGame</span><span class="p">(){</span>
    <span class="nx">changeSnakePosition</span><span class="p">();</span>
    <span class="c1">// game over logic</span>
    <span class="kd">let</span> <span class="nx">result</span><span class="o">=</span><span class="nx">isGameOver</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span><span class="c1">// if result is true</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">clearScreen</span><span class="p">();</span>
    <span class="nx">drawSnake</span><span class="p">();</span>
    <span class="nx">drawApple</span><span class="p">();</span>
  
    <span class="nx">checkCollision</span><span class="p">()</span>
    <span class="nx">drawScore</span><span class="p">();</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">drawGame</span><span class="p">,</span> <span class="mf">1000</span><span class="o">/</span><span class="nx">speed</span><span class="p">);</span><span class="c1">//update screen 7 times a second</span>
<span class="p">}</span>
<span class="c1">//Game Over function</span>
<span class="kd">function</span> <span class="nx">isGameOver</span><span class="p">(){</span>
    <span class="kd">let</span> <span class="nx">gameOver</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span> 
    <span class="c1">//check whether game has started</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">yvelocity</span><span class="o">===</span><span class="mf">0</span> <span class="o">&amp;&amp;</span> <span class="nx">xvelocity</span><span class="o">===</span><span class="mf">0</span><span class="p">){</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">headX</span><span class="o">&lt;</span><span class="mf">0</span><span class="p">){</span><span class="c1">//if snake hits left wall</span>
        <span class="nx">gameOver</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">headX</span><span class="o">===</span><span class="nx">tileCount</span><span class="p">){</span><span class="c1">//if snake hits right wall</span>
        <span class="nx">gameOver</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">headY</span><span class="o">&lt;</span><span class="mf">0</span><span class="p">){</span><span class="c1">//if snake hits wall at the top</span>
        <span class="nx">gameOver</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">headY</span><span class="o">===</span><span class="nx">tileCount</span><span class="p">){</span><span class="c1">//if snake hits wall at the bottom</span>
        <span class="nx">gameOver</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//stop game when snake crush to its own body</span>

     <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">snakeParts</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
         <span class="kd">let</span> <span class="nx">part</span><span class="o">=</span><span class="nx">snakeParts</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">x</span><span class="o">===</span><span class="nx">headX</span> <span class="o">&amp;&amp;</span> <span class="nx">part</span><span class="p">.</span><span class="nx">y</span><span class="o">===</span><span class="nx">headY</span><span class="p">){</span><span class="c1">//check whether any part of snake is occupying the same space</span>
             <span class="nx">gameOver</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span>
             <span class="k">break</span><span class="p">;</span> <span class="c1">// to break out of for loop</span>
         <span class="p">}</span>
     <span class="p">}</span>
    

    <span class="c1">//display text Game Over</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">gameOver</span><span class="p">){</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">;</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span><span class="o">=</span><span class="s2">&quot;50px verdana&quot;</span><span class="p">;</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="s2">&quot;Game Over! &quot;</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">/</span><span class="mf">6.5</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">clientHeight</span><span class="o">/</span><span class="mf">2</span><span class="p">);</span><span class="c1">//position our text in center</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">gameOver</span><span class="p">;</span><span class="c1">// this will stop execution of drawgame method</span>
<span class="p">}</span>

<span class="c1">// score function</span>
<span class="kd">function</span> <span class="nx">drawScore</span><span class="p">(){</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="c1">// set our text color to white</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span><span class="o">=</span><span class="s2">&quot;10px verdena&quot;</span><span class="c1">//set font size to 10px of font family verdena</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="s2">&quot;Score: &quot;</span> <span class="o">+</span><span class="nx">score</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">-</span><span class="mf">50</span><span class="p">,</span><span class="mf">10</span><span class="p">);</span><span class="c1">// position our score at right hand corner </span>

<span class="p">}</span>

<span class="c1">// clear our screen</span>
 <span class="kd">function</span> <span class="nx">clearScreen</span><span class="p">(){</span>

<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="c1">// make screen black</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="mf">0</span><span class="p">,</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">,</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">)</span><span class="c1">// black color start from 0px left, right to canvas width and canvas height</span>

 <span class="p">}</span>
 <span class="kd">function</span> <span class="nx">drawSnake</span><span class="p">(){</span>
    
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">;</span>
    <span class="c1">//loop through our snakeparts array</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">snakeParts</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
        <span class="c1">//draw snake parts</span>
        <span class="kd">let</span> <span class="nx">part</span><span class="o">=</span><span class="nx">snakeParts</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
         <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span><span class="nx">tileCount</span><span class="p">,</span> <span class="nx">part</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span><span class="nx">tileCount</span><span class="p">,</span> <span class="nx">tileSize</span><span class="p">,</span><span class="nx">tileSize</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="c1">//add parts to snake --through push</span>
    <span class="nx">snakeParts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">snakePart</span><span class="p">(</span><span class="nx">headX</span><span class="p">,</span><span class="nx">headY</span><span class="p">));</span><span class="c1">//put item at the end of list next to the head</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">snakeParts</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="nx">tailLength</span><span class="p">){</span>
        <span class="nx">snakeParts</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span><span class="c1">//remove furthest item from  snake part if we have more than our tail size</span>

    <span class="p">}</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span><span class="s2">&quot;orange&quot;</span><span class="p">;</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">headX</span><span class="o">*</span> <span class="nx">tileCount</span><span class="p">,</span><span class="nx">headY</span><span class="o">*</span> <span class="nx">tileCount</span><span class="p">,</span> <span class="nx">tileSize</span><span class="p">,</span><span class="nx">tileSize</span><span class="p">)</span>


 <span class="p">}</span>
 <span class="kd">function</span> <span class="nx">changeSnakePosition</span><span class="p">(){</span>
     <span class="nx">headX</span><span class="o">=</span><span class="nx">headX</span> <span class="o">+</span> <span class="nx">xvelocity</span><span class="p">;</span>
     <span class="nx">headY</span><span class="o">=</span><span class="nx">headY</span><span class="o">+</span> <span class="nx">yvelocity</span><span class="p">;</span>
     
 <span class="p">}</span>
 <span class="kd">function</span> <span class="nx">drawApple</span><span class="p">(){</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">;</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">appleX</span><span class="o">*</span><span class="nx">tileCount</span><span class="p">,</span> <span class="nx">appleY</span><span class="o">*</span><span class="nx">tileCount</span><span class="p">,</span> <span class="nx">tileSize</span><span class="p">,</span> <span class="nx">tileSize</span><span class="p">)</span>
 <span class="p">}</span>
 <span class="c1">// check for collision and change apple position</span>
 <span class="kd">function</span> <span class="nx">checkCollision</span><span class="p">(){</span>
     <span class="k">if</span><span class="p">(</span><span class="nx">appleX</span><span class="o">==</span><span class="nx">headX</span> <span class="o">&amp;&amp;</span> <span class="nx">appleY</span><span class="o">==</span><span class="nx">headY</span><span class="p">){</span>
         <span class="nx">appleX</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="nx">tileCount</span><span class="p">);</span>
         <span class="nx">appleY</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="nx">tileCount</span><span class="p">);</span>
         <span class="nx">tailLength</span><span class="o">++</span><span class="p">;</span>
         <span class="nx">score</span><span class="o">++</span><span class="p">;</span> <span class="c1">//increase our score value</span>

     <span class="p">}</span>
 <span class="p">}</span>
 <span class="c1">//add event listener to our body</span>
 <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="nx">keyDown</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">keyDown</span><span class="p">()</span>
<span class="c1">//up</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="o">==</span><span class="mf">38</span><span class="p">){</span>
        <span class="c1">//prevent snake from moving in opposite direcction</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">yvelocity</span><span class="o">==</span><span class="mf">1</span><span class="p">)</span>
        <span class="k">return</span><span class="p">;</span>
        <span class="nx">yvelocity</span><span class="o">=-</span><span class="mf">1</span><span class="p">;</span>
        <span class="nx">xvelocity</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span>
        
    <span class="p">}</span>
    <span class="c1">//down</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="o">==</span><span class="mf">40</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">yvelocity</span><span class="o">==-</span><span class="mf">1</span><span class="p">)</span>
        <span class="k">return</span><span class="p">;</span>
        <span class="nx">yvelocity</span><span class="o">=</span><span class="mf">1</span><span class="p">;</span>
        <span class="nx">xvelocity</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span>
    <span class="p">}</span>

<span class="c1">//left</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="o">==</span><span class="mf">37</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">xvelocity</span><span class="o">==</span><span class="mf">1</span><span class="p">)</span>
        <span class="k">return</span><span class="p">;</span>
        <span class="nx">yvelocity</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span>
        <span class="nx">xvelocity</span><span class="o">=-</span><span class="mf">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//right</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="o">==</span><span class="mf">48</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">xvelocity</span><span class="o">==-</span><span class="mf">1</span><span class="p">)</span>
        <span class="k">return</span><span class="p">;</span>
        <span class="nx">yvelocity</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span>
        <span class="nx">xvelocity</span><span class="o">=</span><span class="mf">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">drawGame</span><span class="p">();</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

